<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Roboto;
	panose-1:2 0 0 0 0 0 0 0 0 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial",sans-serif;}
h3
	{margin-top:16.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Arial",sans-serif;
	color:#434343;
	font-weight:normal;}
h4
	{margin-top:14.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;
	color:#666666;
	font-weight:normal;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:26.0pt;
	font-family:"Arial",sans-serif;}
.MsoChpDefault
	{font-size:11.0pt;}
.MsoPapDefault
	{line-height:115%;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US style='word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoTitle><a name="_owyel0vrag5k"></a><span lang=EN>Quartz-h2 server
configuration notes.</span></p>

<h3 style='margin-left:.5in;text-indent:-.25in'><a name="_s435e4uvsuye"></a><span
lang=EN>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN>TCP/IP Binding address.</span></h3>

<p class=MsoNormal><span lang=EN style='font-size:10.0pt;line-height:115%;
font-family:Roboto'>In the provided example, the server is bound to the
localhost name, restricting its availability to the local machine. It can be
accessed through the URL format https://localhost:port/uri.</span></p>

<p class=MsoNormal><b><span lang=EN style='font-size:10.0pt;line-height:115%;
font-family:Roboto'>         new QuartzH2Server(&quot;localhost&quot;, 8443, 0,
ctx)</span></b></p>

<p class=MsoNormal><span lang=EN style='font-size:10.0pt;line-height:115%;
font-family:Roboto'>If you want to make it available to any incoming IP
address, use 0.0.0.0</span></p>

<p class=MsoNormal><span lang=EN style='font-size:10.0pt;line-height:115%;
font-family:Roboto'>            <b>new QuartzH2Server(&quot;0.0.0.0&quot;,
8443, 0, ctx)</b></span></p>

<h3 style='margin-left:.5in;text-indent:-.25in'><a name="_yz1f69679uxc"></a><span
lang=EN>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN>Port number.</span></h3>

<p class=MsoNormal><span lang=EN style='font-size:10.0pt;line-height:115%;
font-family:Roboto'>For a local configuration it’s convenient to use ports
greater than 1024.</span></p>

<p class=MsoNormal><span lang=EN style='font-size:10.0pt;line-height:115%;
font-family:Roboto'>new <b>QuartzH2Server(&quot;0.0.0.0&quot;, 8443, 0, ct</b>x)</span></p>

<h3 style='margin-left:.5in;text-indent:-.25in'><a name="_1jchb7w2waqw"></a><span
lang=EN>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN>Inactivity or Idle Timeout.</span></h3>

<h3><a name="_y7g2bw6skggu"></a><span lang=EN style='font-size:10.0pt;
line-height:115%;font-family:Roboto;color:black'>In HTTP/2 streaming, the idle
timeout setting can be configured to zero, effectively disabling the timeout,
or set to a sufficiently long duration to accommodate long-lived multiplexed
HTTP/2 streams. In the example provided, the inactivity timeout is configured
to 16 seconds.</span></h3>

<p class=MsoNormal><span lang=EN style='font-size:10.0pt;line-height:115%;
font-family:Roboto'>        <b>    new QuartzH2Server(&quot;0.0.0.0&quot;,
8443, 16000, ctx)</b></span></p>

<h3 style='margin-left:.5in;text-indent:-.25in'><a name="_lvez9z8nry5x"></a><span
lang=EN>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN>SSL Context - SSLContext.</span></h3>

<p class=MsoNormal><span lang=EN style='font-size:10.0pt;line-height:115%;
font-family:Roboto'>SSLContext grants access to a certificate store that
includes a private key associated with a certificate. This is utilized for TLS
handshakes, which rely on the configuration of certificate trust.</span></p>

<p class=MsoNormal><span lang=EN style='font-size:10.0pt;line-height:115%;
font-family:Roboto'>&nbsp;</span></p>

<p class=MsoNormal><b><span lang=EN style='font-size:10.0pt;line-height:115%;
font-family:Roboto'>           ctx &lt;-
QuartzH2Server.buildSSLContext(&quot;TLSv1.3&quot;, &quot;keystore.jks&quot;,
&quot;password&quot;)</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:10.0pt;line-height:115%;
font-family:Roboto'>           new QuartzH2Server(&quot;0.0.0.0&quot;, 8443,
16000, ctx)  </span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:10.0pt;line-height:115%;
font-family:Roboto'>&nbsp;</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:10.0pt;line-height:115%;
font-family:Roboto'>&nbsp;</span></b></p>

<p class=MsoTitle><a name="_yb28co22krwl"></a><span lang=EN>Notable Features of
the Quartz-h2 Server</span></p>

<h3><a name="_9uibneahloxb"></a><span lang=EN>Video streaming.</span></h3>

<h4 style='margin-left:.5in;text-indent:-.25in'><a name="_r34moctji91u"></a><span
lang=EN>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN>Video streaming as a regular file ( can be used for http/2 video
streaming, with H2 protocol windows on Firefox)</span></h4>

<p class=MsoNormal><span lang=EN>&nbsp;</span></p>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>case GET -&gt; Root / StringVar(file) =&gt;</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>     val FOLDER_PATH = HOME_DIR + &quot;web_root/&quot;</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>     val FILE = s&quot;$file&quot;</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>     val BLOCK_SIZE = 32000</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>     for {</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>              jpath &lt;- IO(new java.io.File(FOLDER_PATH +
FILE))</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>              jstream &lt;- IO.blocking(new
java.io.FileInputStream(jpath))</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>     } yield (Response.Ok()</span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b><span lang=EN style='font-size:
8.0pt;line-height:115%;font-family:Roboto'>                  
.asStream(fs2.io.readInputStream(IO(jstream), BLOCK_SIZE, true))</span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b><span lang=EN style='font-size:
8.0pt;line-height:115%;font-family:Roboto'>                 
.contentType(ContentType.contentTypeFromFileName(FILE)))</span></b></p>

<h4 style='margin-left:.5in;text-indent:-.25in'><a name="_nz0gbkju515"></a><span
lang=EN>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN>Video streaming with range headers required for Safari Browsers.</span></h4>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>&nbsp;</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>case req @ GET -&gt; Root / StringVar(file) =&gt;</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>      val FOLDER_PATH = &quot;web_root/&quot;</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>      val FILE = s&quot;$file&quot;</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>      val BLOCK_SIZE = 32000</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>      for {</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>        jpath &lt;- IO(new java.io.File(FOLDER_PATH +
FILE))</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:8.0pt;line-height:115%;
font-family:Roboto'>      } yield (HttpRangeRequest.makeResponse(req, jpath,
BLOCK_SIZE))</span></b></p>

<p class=MsoNormal><b><span lang=EN style='font-size:10.0pt;line-height:115%;
font-family:Roboto'>&nbsp;</span></b></p>

</div>

</body>

</html>
